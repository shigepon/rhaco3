<rt:extends href="base.html" />


<rt:block name="content">

<h2>Explorer</h2>


<script type="text/javascript">
var json_obj;
	function send(url,method_type,json_str){
		try{
			json_obj = eval('(' + json_str + ')');
			$.ajax({
				type: method_type,
				url: url,
				dataType: 'text',
				data: json_obj,
				success: function(data,status,header){
					$("#result_status").html('(HTTP status ' + header.status + ')');
					$("#result_header").html(header.getAllResponseHeaders());
					$("#result_body").html($('<div>').text(data).html());
				}
			});
		}catch(e){
			alert(e);
		}
	}
</script>

<form>

<select name="url_list" onchange="this.form.url.value=this.options[this.selectedIndex].value">
	<rt:loop param="maps" var="map">
		<option value="{$map['pattern']}">{$map['name']}</option>
	</rt:loop>
</select>
<hr />
<select name="method_type" style="width:70px;">
	<option value="post">POST</option>
	<option value="get">GET</option>
</select>
<input type="text" name="url" style="width:400px;" />
<input class="button" type="button" value="send" onclick="send(this.form.url.value,this.form.method_type.options[this.form.method_type.selectedIndex].value,this.form.data_json.value)" /><br />
<textarea name="data_json" style="width:700px; height:50px;">{}</textarea>
</form>

<div style="width:100%;">
	<div style="height:100%;">
		<h3>body <span id="result_status" style="font-weight: bold;"></span>:</h3>
		<pre id="result_body"></pre>
		
		<h3>header:</h3>
		<pre id="result_header"></pre>
	</div>
</div>
</rt:block>
