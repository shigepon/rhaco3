<rt:extends href="base.html" />

<rt:block name="search_form" />

<rt:block name="content">

<h2>APIエクスプローラ</h2>


<script type="text/javascript">
var json_obj;
	function send(url,method_type,json_str){
		try{
			json_obj = eval('(' + json_str + ')');
			$.ajax({
				type: method_type,
				url: url,
				dataType: 'text',
				data: json_obj,
				success: function(data,status,header){
					$("#result_status").html(header.status);
					$("#result_header").html(header.getAllResponseHeaders());
					$("#result_body").html($('<div>').text(data).html());
				}
			});
		}catch(e){
			alert(e);
		}
	}
</script>

<form>
<select name="url_list" onchange="this.form.url.value=this.options[this.selectedIndex].value" style="width:600px;">
	<rt:loop param="maps" var="map">
		<option value="{$map['pattern']}">{$map['pattern']}</option>
	</rt:loop>
</select>
<br />

<select name="method_type" style="width:70px;" >
	<option value="post">post</option>
	<option value="get">get</option>
</select>
<input type="text" name="url" style="width:400px;" />
<input type="button" value="send" onclick="send(this.form.url.value,this.form.method_type.options[this.form.method_type.selectedIndex].value,this.form.data_json.value)" /><br />
query:<textarea name="data_json" style="width:500px;">{}</textarea>
</form>

<h3>status:</h3>
<pre id="result_status"></pre>
<h3>header:</h3>
<pre id="result_header"></pre>
<h3>body:</h3>
<pre id="result_body"></pre>
</rt:block>
